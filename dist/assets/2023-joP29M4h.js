import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as H,P as b,H as A,D as G,W as I,R as L,E as S,U as W,V as k,C as O,G as R,O as U,a as V,b as c,M as j,c as u,d as F,e as f,f as x,g,I as q}from"./UnrealBloomPass-kaWlCCFv.js";const M=window.innerWidth,v=window.innerHeight,h=new c(0,-.09807,0),o=new H,m=new b(50,M/v,.1,2e3);m.position.z=50;m.position.y=3;const B=new A(0,0,1),P=new G(2236962,10);P.position.y=10;o.add(B);o.add(P);const l=new I;l.setSize(M,v);l.setClearColor(0);const N=new L(o,m),D=new S(l);D.addPass(N);const T=new W(new k(window.innerWidth,window.innerHeight),1.6,.1,.1);D.addPass(T);l.toneMapping=O;l.toneMappingExposure=1.5;const X=new R(100,100);o.add(X);new U(m,l.domElement);document.body.appendChild(l.domElement);const Y=[[0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0]],J=[[0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0,1,0,0,0,1],[0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,1,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,1],[1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0]],K=[[1,0,0,0,0,0,1,0,0,0,0,0,1],[0,1,0,0,0,0,1,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,1,0,0,0,0,1,0],[1,0,0,0,0,0,1,0,0,0,0,0,1]],Q=[[1,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1],[1,0,0,1,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0],[1,1,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,1,0],[1,0,0,1,0,1,0,0,1,0,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,0,1],[1,1,1,0,0,0,1,1,0,0,1,0,0,1,0,1,1,1,0,0,0,1,0,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,0,0,0,1,0,0,1,0,1,1,1,0]];function Z(a=nw,s){let i=2,d=.1,r={forces:[],radius:[],color:a};for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==1)for(let w=.07;w<d;w+=.03){const C=w*2,z=(t-s[e].length/2)*i*w,E=-(e-s.length/2)*i*w;r.forces.push(new c(z,E,0)),r.radius.push(C)}return r}const _=(a=new c(0,0,0),s=new c(0,0,0),i=new u(16777215))=>{const d=new g(1),r=new f({color:i,emissive:i,emissiveIntensity:1.2}),e=new x(d,r);return e.position.set(a.x,a.y,a.z),e.userData.velocity=s,e.userData.isParticle=!0,e.userData.time=new Date,e.userData.update=()=>{e.userData.velocity.add(h),e.position.add(e.userData.velocity),new Date-e.userData.time>1e3&&o.remove(e)},e},n=new V,p=new j,$=(a=new c(0,0,0),s=new u)=>{const i=Z(s,[J,Q,Y,K][Math.floor(Math.random()*4)]),d=i.forces.length,r=1,e=new q(new g,new f({color:s,emissive:s,emissiveIntensity:Math.random()*2}),d);e.userData.isExplosion=!0,e.userData.velocities=[],e.userData.time=new Date;for(let t=0;t<d;t++)e.getMatrixAt(t,p),p.decompose(n.position,n.rotation,n.scale),n.position.x=a.x,n.position.y=a.y,n.position.z=a.z,n.updateMatrix(),e.setMatrixAt(t,n.matrix),e.userData.velocities.push(i.forces[t]);e.userData.update=()=>{for(let t=0;t<d;t++)e.getMatrixAt(t,p),p.decompose(n.position,n.rotation,n.scale),e.userData.velocities[t].add(h),n.position.add(e.userData.velocities[t]),n.scale.set(r,r,r),n.updateMatrix(),e.setMatrixAt(t,n.matrix);e.instanceMatrix.needsUpdate=!0,new Date-e.userData.time>1e3&&o.remove(e)},o.add(e)},e0=()=>{const a=new c().randomDirection().multiplyScalar(200),s=new c(0,2+Math.random()*8,0),i=new u(Math.random()*16777215),d=new F(1,4),r=new f({color:i,emissive:i,emissiveIntensity:1.2}),e=new x(d,r);e.position.set(a.x,a.y,a.z),e.userData.velocity=s,e.userData.update=()=>{e.userData.velocity.add(h),e.position.add(e.userData.velocity),o.add(_(new c(e.position.x,e.position.y-2,e.position.z),new c(Math.random(),0,Math.random()),new c(4095))),e.userData.velocity.y<0&&($(e.position,e.material.color),o.remove(e))},e.userData.isFirework=!0,o.add(e)};let y=new Date;(function a(){l.render(o,m),D.render(),new Date-y>100&&(e0(),y=new Date),o.children.forEach(s=>{s.userData.update&&s.userData.update()}),window.requestAnimationFrame(a)})();

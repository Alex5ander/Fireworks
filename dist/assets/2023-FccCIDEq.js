import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as H,P as b,H as A,D as G,W as I,R as L,E as S,U as W,V as k,C as O,G as R,O as U,a as V,b as d,M as j,c as u,d as F,e as f,f as x,g,I as q}from"./UnrealBloomPass-kaWlCCFv.js";const v=window.innerWidth,M=window.innerHeight,h=new d(0,-.09807,0),i=new H,m=new b(50,v/M,.1,2e3);m.position.z=50;m.position.y=3;const B=new A(0,0,1),P=new G(2236962,10);P.position.y=10;i.add(B);i.add(P);const l=new I;l.setSize(v,M);l.setClearColor(0);const N=new L(i,m),D=new S(l);D.addPass(N);const T=new W(new k(window.innerWidth,window.innerHeight),1.6,.1,.1);D.addPass(T);l.toneMapping=O;l.toneMappingExposure=1.5;const X=new R(100,100);i.add(X);new U(m,l.domElement);document.body.appendChild(l.domElement);const Y=[[0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],[0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0]],J=[[0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0],[1,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0,1,0,0,0,1],[0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,1,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,1],[1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0]],K=[[1,0,0,0,0,0,1,0,0,0,0,0,1],[0,1,0,0,0,0,1,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,1,0,0,0,0,1,0],[1,0,0,0,0,0,1,0,0,0,0,0,1]],Q=[[1,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1],[1,0,0,1,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0],[1,1,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,1,0],[1,0,0,1,0,1,0,0,1,0,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0,0,0,0,1],[1,1,1,0,0,0,1,1,0,0,1,0,0,1,0,1,1,1,0,0,0,1,0,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,0,0,0,1,0,0,1,0,1,1,1,0]];function Z(a=nw,s){let o=2,c=.1,r={forces:[],radius:[],color:a};for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==1)for(let w=.07;w<c;w+=.03){const C=w*2,z=(t-s[e].length/2)*o*w,E=-(e-s.length/2)*o*w;r.forces.push(new d(z,E,0)),r.radius.push(C)}return r}const _=(a=new d(0,0,0),s=new d(0,0,0),o=new u(16777215))=>{const c=new g(1),r=new f({color:o,emissive:o,emissiveIntensity:2}),e=new x(c,r);return e.position.set(a.x,a.y,a.z),e.userData.velocity=s,e.userData.isParticle=!0,e.userData.time=new Date,e.userData.update=()=>{e.userData.velocity.add(h),e.position.add(e.userData.velocity),new Date-e.userData.time>1e3&&i.remove(e)},e},n=new V,p=new j,$=(a=new d(0,0,0),s=new u)=>{const o=Z(s,[J,Q,Y,K][Math.floor(Math.random()*4)]),c=o.forces.length,r=1,e=new q(new g,new f({color:s,emissive:s,emissiveIntensity:2}),c);e.userData.isExplosion=!0,e.userData.velocities=[],e.userData.time=new Date;for(let t=0;t<c;t++)e.getMatrixAt(t,p),p.decompose(n.position,n.rotation,n.scale),n.position.x=a.x,n.position.y=a.y,n.position.z=a.z,n.updateMatrix(),e.setMatrixAt(t,n.matrix),e.userData.velocities.push(o.forces[t]);e.userData.update=()=>{for(let t=0;t<c;t++)e.getMatrixAt(t,p),p.decompose(n.position,n.rotation,n.scale),e.userData.velocities[t].add(h),n.position.add(e.userData.velocities[t]),n.scale.set(r,r,r),n.updateMatrix(),e.setMatrixAt(t,n.matrix);e.instanceMatrix.needsUpdate=!0,new Date-e.userData.time>1e3&&i.remove(e)},i.add(e)},e0=()=>{const a=new d().randomDirection().multiplyScalar(200),s=new d(0,2+Math.random()*8,0),o=new u(Math.random()*16777215),c=new F(1,4),r=new f({color:o,emissive:o,emissiveIntensity:2}),e=new x(c,r);e.position.set(a.x,a.y,a.z),e.userData.velocity=s,e.userData.update=()=>{e.userData.velocity.add(h),e.position.add(e.userData.velocity),i.add(_(new d(e.position.x,e.position.y-2,e.position.z),new d().randomDirection(),o)),e.userData.velocity.y<0&&($(e.position,e.material.color),i.remove(e))},e.userData.isFirework=!0,i.add(e)};let y=new Date;(function a(){new Date-y>100&&(e0(),y=new Date),i.children.forEach(s=>{s.userData.update&&s.userData.update()}),l.render(i,m),D.render(),window.requestAnimationFrame(a)})();
